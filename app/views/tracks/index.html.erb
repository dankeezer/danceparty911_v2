<%= javascript_include_tag "soundmanager2-dj" %>
<%= javascript_include_tag "page-playerDJ" %>

<script>

/* --------

  Config override: This demo uses shiny flash 9 stuff, overwriting Flash 8-based defaults
  Alternate PP_CONFIG object must be defined before soundManager.onready()/onload() fire.
  Alternately, edit the config in page-player.js to simply use the values below by default

-------- */

// demo only, but you can use these settings too..
soundManager.setup({
  flashVersion: 9,
  preferFlash: false, // for visualization effects
  useHighPerformance: true, // keep flash on screen, boost performance
  wmode: 'transparent', // transparent SWF, if possible
  url: 'swf/'
});

// custom page player configuration

var PP_CONFIG = {
  autoStart: false,      // begin playing first sound when page loads
  playNext: false,        // stop after one sound, or play through list until end
  useThrottling: false,  // try to rate-limit potentially-expensive calls (eg. dragging position around)</span>
  usePeakData: true,     // [Flash 9 only] whether or not to show peak data (left/right channel values)</b> - nor noticable on CPU
  useWaveformData: false,// [Flash 9 only] show raw waveform data</b> - WARNING: LIKELY VERY CPU-HEAVY
  useEQData: false,      // [Flash 9 only] show EQ (frequency spectrum) data
  useFavIcon: false     // try to apply peakData to address bar (Firefox + Opera)</b> - performance note: appears to make Firefox 3 do some temporary, heavy disk access/swapping/garbage collection at first(?)</b> - may be too heavy on CPU
}

</script>

<style type="text/css">

body{
  background-color: #f9f9f9;
  margin: 0;
  padding: 0 !important;
}

input[type="text"],
.uneditable-input {
  margin-bottom: 0px !important;
  margin-left: 10px;
  height: 20px;
  width: 75% !important;
}

form {
  margin: 0px;
}

.alert {
  margin-top: 2px;
  margin-bottom: 2px;
}

</style>

  <h5> 
    <%= simple_form_for Track.new do |f| %>
      <% if User.find(current_or_guest_user).tracks.empty? %>
        <%= f.text_field :original_url, :value => 'https://soundcloud.com/youngdaniel/sets/dp911' %>
      <% else %>
        <%= f.text_field :original_url, :placeholder => 'enter a soundcloud track or playlist url' %>
      <% end %>
    <% end %>
  </h5>

  <% flash.each do |name, msg| %>
    <% if name == :notice %>
      <% color = "success" %>
    <% elsif name == :info %>
      <% color = "info" %>
    <% else %>
      <% color = "error" %>
    <% end %>
    <div class="alert alert-<%= color %>">
      <a class="close" data-dismiss="alert">Ã—</a>
      <%= msg %>
    </div>
  <% end %>

 <ul class="playlist">
 	<% @tracks.each do |track| %>
    	<li><a class="sm2_link" type="audio/mp3" href="<%= track.stream_url %>">
    			<b><%= track.artist_name %></b> - <%= track.title %></a>
		</li>
	<% end %>
</ul>